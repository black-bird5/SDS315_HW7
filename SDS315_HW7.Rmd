---
title: "SDS315_HW7"
author: "William Zuo"
date: "2025-04-04"
output:
  html_document:
    toc: true
    toc_float: true
  pdf_document:
    toc: true
---

```{r global_options, include=FALSE}
#needed packages:
library(tidyverse)
library(mosaic)
library(MatchIt)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(warning = FALSE)
```

# **Introduction**

My name is William Zuo and my EID is wcz82. This is where my results and solutions are contained. Here is the link to my GitHub repository containing my R code for this assignment: https://github.com/black-bird5/SDS315_HW7. 

# **Problem 1**

```{r, echo=FALSE}
arm <- read.csv("armfold.csv")
```

### **Part A**

There are `r count(arm$Sex == "Male")` male students and `r count(arm$Sex == "Female")` female students in this dataset. The sample proportion of males who folded their left arm on top is `r round(prop(~LonR_fold, data = subset(arm, Sex == "Male")),3)` and the sample proportion of females who folded their left arm on top is `r round(prop(~LonR_fold, data = subset(arm, Sex == "Female")),3)`.

### **Part B**

The observed difference in proportions between male and female students who fold their left arms on top is `r round(prop(~LonR_fold, data = subset(arm, Sex == "Male")) - prop(~LonR_fold, data = subset(arm, Sex == "Female")),3)`.

### **Part C**

```{r, echo=FALSE}
arm$Sex <- factor(arm$Sex)
arm$Sex <- relevel(arm$Sex, ref = "Male")
t.test(LonR_fold ~ Sex, data = arm)
```

The 95% confidence interval generated by R's built-in function is (-0.085, 0.182)

The formula for the standard error for the difference in proportions is: sqrt(p1(1-p1)/n1 + p2(1-p2)/n2). The values I plugged into the formula are as follow: p1 = 0.472, n1 = 106, p2 = 0.423, n2 = 111. The z* value I used was 1.96 in order to generated a 95% confidence interval.

Using the above formula, z*, and observed difference in proportion, we get the below equation to find our confidence interval:

0.048 +- 1.96*sqrt(0.472(1-0.472)/106 + 0.423(1-0.423)/111) = (-0.084, 0.180)

This hand-calculated interval roughly corresponds to the interval calculated by R's built-in function. 

### **Part D**

If we were to repeat this experiment a large number of times, then we would expected that about 95% of all confidence intervals generated would contain the true difference in proportion between males and females that fold their left arm on top. 

### **Part E**

The standard error calculated above represents how much variance we would expect in the difference of proportions between male and female students who fold their left arm on top across different random samples.

### **Part F**

The sampling distribution in this context refers to the distribution of the difference of proportions between male and female students who fold their left arm on top if we repeated this experiment across different random samples. 

### **Part G**

The Central Limit Theorem justifies using a normal distribution to approximate the sampling distribution of the difference in sample proportions. This is because the CLT says that, as long as our sample sizes are large enough, our sampling distribution will be approximately normal, even if the original data is not.

### **Part H**

Since there is not any statistically significant difference in the proportion of people who fold their left arm on top based on sex at a 95% confidence level (since 0 is contained in the interval), we cannot rule out the possibility that there is no difference between the proportion of male and female students who fold their left arm on top. However, because the interval is skewed so heavily in the positive direction, it's plausible that the true difference in the proportion of people who fold their left arm on top based on sex could be as high as 0.3. This suggests there might be a possible practically significant difference in the proportion of male and female students who fold their left arm on top. 

### **Part I**

If we repeated this experiment many times with different random samples of university students, the confidence intervals generated would be different from sample to sample due to the variance of each sample population. However, about 95% of all those confidence intervals generated would contain the true difference in proportion between males and females that fold their left arm on top.

# **Problem 2**

```{r, echo=FALSE}
turnout <- read.csv("turnout.csv")
```

### **Part A**

```{r, echo=FALSE}
t.test(voted1998 ~ GOTV_call, data = turnout)
```

The sample proportion of people who got a GOTV call and voted in 1998 is `r round(prop(~voted1998, data = subset(turnout, GOTV_call == 1)),3)` and the sample proportion of people who didn't get a GOTV call and voted in 1998 is `r round(prop(~voted1998, data = subset(turnout, GOTV_call == 0)),3)`. 

The 95% confidence interval generated by R's built-in function for the difference in these proportions is (-0.264, -0.143)

### **Part B**

```{r, echo=FALSE}
t.test(voted1996 ~ GOTV_call, data = turnout)
t.test(AGE ~ GOTV_call, data = turnout)
t.test(MAJORPTY ~ GOTV_call, data = turnout)
```

Because none of the 3 confident intervals generated contain 0, we have evidence to conclude that there are statistically significant relationships between whether someone got a GOTV call and the 3 confounding variables of voted1996, AGE, and MAJORPTY that would not have obtained if the confounding variables were independent of GOTV_call.

### **Part C**

```{r, echo=FALSE}
turnout_matched <- matchit(GOTV_call ~ voted1996 + AGE + MAJORPTY, data = turnout, method = "nearest", ratio = 5)

matched_data <- match.data(turnout_matched)

t.test(voted1996 ~ GOTV_call, data = matched_data)
t.test(AGE ~ GOTV_call, data = matched_data)
t.test(MAJORPTY ~ GOTV_call, data = matched_data)

t.test(voted1998 ~ GOTV_call, data = matched_data)
```

With the new matched data, we can see that all 3 of the confidence intervals generated contain 0, which provides evidence that the data is balanced with respect to the 3 confounding variables of voted1996, AGE, and MAJORPTY. 

In this new matched data, the sample proportion of people who got a GOTV call and voted in 1998 is `r round(prop(~voted1998, data = subset(matched_data, GOTV_call == 1)),3)` and the sample proportion of people who didn't get a GOTV call and voted in 1998 is `r round(prop(~voted1998, data = subset(matched_data, GOTV_call == 0)),3)`. 

The 95% confidence interval generated by R's built-in function for the difference in these proportions is (-0.0145, -0.0125). Since 0 is not contained in this confidence interval, we can conclude with 95% confidence that there is a statistically significant relationship between whether someone got a GOTV call and the likelihood of them voting in the 1998 election. However, the p-value of the new matched data is 0.02, which is significantly higher than the original data's p-value of 2.31e-10. This means that, once controlling for confounding variables, getting a GOTV call had much less of an effect on whether someone voted in the 1998 elected than would've been concluded had we used the original dataset. 
